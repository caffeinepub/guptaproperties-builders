{
  "kind": "build_request",
  "title": "Improve deployment retry guidance and add a global admin-status indicator",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-5",
      "text": "Complete the existing `frontend/DEPLOYMENT_RETRY.md` so it contains an end-to-end, copy/paste-ready procedure to retry a full build and redeploy to BOTH draft and live, including a final verification checklist to confirm the bootstrap admin principal is recognized as admin after deployment.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1",
          "msg-2",
          "msg-14",
          "msg-18"
        ],
        "quotes": [
          "try again until you get successfull",
          "retry the full build + redeploy to LIVE with your principal seeded as an admin and the admin list be updated additively, keeping all existing admins and deploy both draft and live",
          "try agannn",
          "yes"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/DEPLOYMENT_RETRY.md` is no longer truncated and includes concrete steps for: clean install/build, deploying canisters, deploying the frontend, and performing the same procedure for both draft and live environments.",
        "The doc includes a verification section that instructs how to confirm admin access using the existing Admin Panel diagnostics UI and the bootstrap principal `fxms2-qslpu-4ybaz-kouy4-mpule-mqqq5-7grvy-gyikf-o6pvz-zqvgd-hqe`.",
        "All user-facing text in the doc is in English."
      ]
    },
    {
      "id": "REQ-6",
      "text": "Add a small, always-available UI indicator that shows whether the currently logged-in user is an admin, with a manual refresh control that re-checks admin status without requiring navigation to the Admin page.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2",
          "msg-18"
        ],
        "quotes": [
          "retry the full build + redeploy to LIVE with your principal seeded as an admin and the admin list be updated additively, keeping all existing admins and deploy both draft and live",
          "yes"
        ]
      },
      "acceptanceCriteria": [
        "When a user is authenticated, the app shows an admin-status indicator (e.g., \"Admin\" vs \"Not admin\") in a global location (such as the header) across pages.",
        "The indicator uses the existing `useIsCallerAdmin()` query and includes a refresh action that triggers a refetch (or invalidation + refetch) and updates the display accordingly.",
        "When the user is not authenticated, the indicator is hidden or shows an unauthenticated state without throwing errors.",
        "All user-facing text is in English.",
        "No edits are made to any frontend immutable paths listed in SYSTEM_CONTEXT."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo` (no additional backend services).",
    "Do not modify any files under `frontend/src/components/ui` or any other paths listed in `frontend.immutablePaths` in SYSTEM_CONTEXT.",
    "Use English for all user-facing text."
  ],
  "nonGoals": [
    "Implementing new deployment infrastructure/CI services outside the repository.",
    "Adding third-party auth providers or non-Internet-Identity authentication.",
    "Adding real-time features (websockets/push notifications)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}